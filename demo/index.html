<!DOCTYPE html>
<html>
<head>
    <title>Timers Demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="example.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="jquery.timers.js"></script>
</head>
<body>
    <h1>Timers Demos</h1>
    <h2>Javascript timers on steroids (and easier to boot)!</h2>
    <h3><a href="https://github.com/doconix/jquery.timers.js">Get the Code...</a></h3>



    <div class="example">
        <div class="title">Example: Set a timer to run one time, in 2 seconds</div>
        <div class="code">
            <div id="someid">Not yet run</div>
            <script>
                $(() => {
                    $('#someid').timers().Timer({
                        millis: 2000
                    }).do((timer) => {
                        $(this).text("Ran after 2 seconds. Reload the page to run again.")
                    })
                })
            </script>
        </div>
    </div>
  
  
  

    <div class="example">
        <div class="title">Example: Set a timer to run repeatedly at exact intervals of 0.8 seconds</div>
        <div class="code">
            <div id="someid2">Element here</div>
            <script>
                $(() => {
                    var index = 1;
                    $('#someid2').timers().IntervalTimer({
                        interval: 800
                    }).do((timer) => {
                        if (index % 5 == 0) {
                            $(this).html('');
                        }
                        $(this).append('<div>Run #' + index);
                        index++;
                    })
                })
            </script>
        </div>
    </div>

  
  

    <div class="example">
        <div class="title">Example: Set a timer to run repeatedly with exactly 2 seconds in between runs.</div>
        <div class="description">
            This one is for long-running functions (such as an Ajax call).  It starts the 2 seconds <b>after</b> the function finishes. 
            This is quite different than Javascript's setInterval() method because it ensures a given period between calls.
        </div>
        <div class="description">
            The "After" type of timer calls the function immediately, followed by the sleep delay.  This is useful when you
            need a periodic function but also need an initial run.
        </div>
        <div class="code">
            <div id="someid3">Element here</div>
            <script>
                $(() => {
                    var index = 1;
                    $('#someid3').timers().SleepAfterTimer({
                        millis: 2000
                    }).do((timer) => {
                        console.log(this)
                        if (index % 5 == 0) {
                            $(this).html('');
                        }
                        $(this).append('<div>Run #' + index);
                        index++;
                    })
                })
            </script>
        </div>
    </div>
  


    <script>
        $(function() {
            // place the code in each example
            $('.code').each(function() {
                var html = this.innerHTML.replace(new RegExp('<', 'g'), '&lt;').replace(new RegExp('>', 'g'), '&gt;');
                var code_viewer = $('<div class="code_viewer"></div>');
                code_viewer.html(html);
                $(this).closest('.example').prepend(code_viewer);
            });//each
        });//ready
    </script>

</body>
</html>